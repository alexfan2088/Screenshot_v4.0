<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:Screenshot.App.ViewModels"
        mc:Ignorable="d"
        x:Class="Screenshot.App.MainWindow"
        Title="Screenshot 4.0"
        Width="1400" Height="52"
        MinWidth="1024" MinHeight="44"
        Topmost="True"
        WindowStartupLocation="CenterScreen">
  <Design.DataContext>
    <vm:MainViewModel />
  </Design.DataContext>

  <Border Background="#0B6F3E" Padding="6,4" BorderBrush="#0A5A33" BorderThickness="0,0,0,1">
    <Grid ColumnDefinitions="Auto,*" VerticalAlignment="Center">
      <StackPanel Orientation="Horizontal" Spacing="6" VerticalAlignment="Center">
        <Menu Background="Transparent" BorderBrush="Transparent" FontSize="12">
          <Menu.Styles>
            <Style Selector="MenuItem">
              <Setter Property="Foreground" Value="#000000" />
              <Setter Property="Padding" Value="10,4" />
            </Style>
            <Style Selector="MenuItem:top-level">
              <Setter Property="Foreground" Value="#FFFFFF" />
            </Style>
          </Menu.Styles>
          <MenuItem Header="设置">
            <MenuItem Header="音视频参数" Click="OnOpenSettingsClick" />
            <Separator />
            <MenuItem Header="音视频模式">
              <MenuItem Header="{Binding OutputModeNoneLabel}" Command="{Binding SetOutputModeNoneCommand}" />
              <MenuItem Header="{Binding OutputModeAudioOnlyLabel}" Command="{Binding SetOutputModeAudioOnlyCommand}" />
              <MenuItem Header="{Binding OutputModeVideoOnlyLabel}" Command="{Binding SetOutputModeVideoOnlyCommand}" />
              <MenuItem Header="{Binding OutputModeAudioAndVideoLabel}" Command="{Binding SetOutputModeAudioAndVideoCommand}" />
            </MenuItem>
            <MenuItem Header="视频合成方式">
              <MenuItem Header="{Binding VideoMergeLiveLabel}" Command="{Binding SetVideoMergeLiveCommand}" />
              <MenuItem Header="{Binding VideoMergePostLabel}" Command="{Binding SetVideoMergePostCommand}" />
            </MenuItem>
            <Separator />
            <MenuItem Header="{Binding KeepJpgLabel}" Command="{Binding ToggleKeepJpgCommand}" />
            <MenuItem Header="{Binding GeneratePptLabel}" Command="{Binding ToggleGeneratePptCommand}" />
            <MenuItem Header="{Binding GeneratePdfLabel}" Command="{Binding ToggleGeneratePdfCommand}" />
            <Separator />
            <MenuItem Header="日志设置">
              <MenuItem Header="{Binding LogEnabledLabel}" Command="{Binding SetLogEnabledCommand}" />
              <MenuItem Header="{Binding LogDisabledLabel}" Command="{Binding SetLogDisabledCommand}" />
              <Separator />
              <MenuItem Header="{Binding LogOverwriteLabel}" Command="{Binding SetLogOverwriteCommand}" />
              <MenuItem Header="{Binding LogAppendLabel}" Command="{Binding SetLogAppendCommand}" />
            </MenuItem>
          </MenuItem>
          <MenuItem Header="目录">
            <MenuItem Header="选择输出目录" Click="OnPickOutputDirectoryClick" />
            <MenuItem Header="选择日志目录" Click="OnPickLogDirectoryClick" />
            <Separator />
            <MenuItem Header="打开输出目录" Command="{Binding OpenOutputDirectoryCommand}" />
            <MenuItem Header="打开日志目录" Command="{Binding OpenLogDirectoryCommand}" />
            <MenuItem Header="打开设置目录" Command="{Binding OpenSettingsDirectoryCommand}" />
            <MenuItem Header="打开会话目录" Command="{Binding OpenLastSessionDirectoryCommand}" />
          </MenuItem>
        </Menu>

        <Button Content="开始" Command="{Binding StartCommand}" Background="#1E8E5A" Foreground="#FFFFFF" Padding="8,1" FontSize="12" />
        <Button Content="停止" Command="{Binding StopCommand}" Background="#B33B3B" Foreground="#FFFFFF" Padding="8,1" FontSize="12" />
        <Button Content="选择" Click="OnSelectRegionClick" IsEnabled="{Binding IsEditingUnlocked}" Padding="6,1" FontSize="12" />
        <Button Content="恢复" Command="{Binding ResetSettingsCommand}" IsEnabled="{Binding IsEditingUnlocked}" Padding="6,1" FontSize="12" />

        <TextBlock Text="变化率:" Foreground="#EAF7F1" VerticalAlignment="Center" FontSize="12" />
        <TextBox Width="22" Height="18" MinHeight="0" Text="{Binding ScreenChangeRate}" IsEnabled="{Binding IsEditingUnlocked}" FontSize="12" TextAlignment="Right" VerticalContentAlignment="Center" Padding="4,0" />
        <TextBlock Text="%" Foreground="#EAF7F1" VerticalAlignment="Center" FontSize="12" />

        <TextBlock Text="间隔:" Foreground="#EAF7F1" VerticalAlignment="Center" FontSize="12" />
        <TextBox Width="18" Height="18" MinHeight="0" Text="{Binding ScreenshotInterval}" IsEnabled="{Binding IsEditingUnlocked}" FontSize="12" TextAlignment="Right" VerticalContentAlignment="Center" Padding="4,0" />
        <TextBlock Text="秒" Foreground="#EAF7F1" VerticalAlignment="Center" FontSize="12" />

        <TextBlock Text="时长:" Foreground="#EAF7F1" VerticalAlignment="Center" FontSize="12" />
        <TextBox Width="18" Height="18" MinHeight="0" Text="{Binding RecordingDurationMinutes}" IsEnabled="{Binding IsEditingUnlocked}" FontSize="12" TextAlignment="Right" VerticalContentAlignment="Center" Padding="4,0" />
        <TextBlock Text="分钟" Foreground="#EAF7F1" VerticalAlignment="Center" FontSize="12" />

      </StackPanel>

      <Grid Grid.Column="1"
            ColumnDefinitions="Auto,*"
            VerticalAlignment="Center"
            HorizontalAlignment="Right"
            Margin="72,0,0,0">
        <StackPanel Orientation="Horizontal" Spacing="6">
          <TextBlock Text="屏幕变化率:" Foreground="#EAF7F1" FontSize="12" />
          <TextBlock Text="{Binding CurrentChangeRateText}" Foreground="#FFD54F" FontSize="12" Width="70" TextAlignment="Right" />
          <TextBlock Text="截图数量:" Foreground="#EAF7F1" FontSize="12" />
          <TextBlock Text="{Binding CaptureCountText}" Foreground="#FFD54F" FontSize="12" Width="50" TextAlignment="Right" />
          <TextBlock Text="剩余:" Foreground="#EAF7F1" FontSize="12" />
          <TextBlock Text="{Binding RemainingTimeText}" Foreground="#FFD54F" FontSize="12" Width="90" TextAlignment="Right" />
        </StackPanel>
        <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="6" HorizontalAlignment="Right">
          <TextBlock Text="下次检查:" Foreground="#EAF7F1" FontSize="12" />
          <TextBlock Text="{Binding NextCheckSecondsText}" Foreground="#FFD54F" FontSize="12" Width="70" TextAlignment="Right" />
        </StackPanel>
      </Grid>
    </Grid>
  </Border>
</Window>
